---
type: note
tags:
- '#ai/ref'
---
> [!info] 必要なセクションを選択して使用してください！

# 📜 文脈・背景

AIエージェントでRAGをするため、事前にデータをEmbeddingしておく必要がある。この処理をAWSの何のサービスを使って実行するかを検討する。

# 🎨 対応案

## 案1. Lambda
- **pros**
	- 使い慣れており、最も実装が単純
	- 既存のアーキテクチャで実現できる
- **cons**
	- 実行時間に制限がある（15分）
	- メモリに制限がある（10GB）
## 案2. Step Functions
- **pros**
	- パイプラインの処理が増えても見通しやすい
- **cons**
	- azuchiでの採用実績がなく検証が必要
	- 今回の処理はgoogle driveへのアクセスが必要なため、結局Step Functionsから呼び出すLambdaを実装する必要がある
## 案3. Code Build
- **pros**
	- 実行時間の制限が緩く（36時間）、Lambdaで処理できないパイプラインも動かすことができる
- **cons**
	- azuchiでの採用実績がなく検証が必要

# 🚀 決定

案1のLambdaを採用する。
採用理由は下記の通り。
- まだパイプラインの処理が複雑ではなく、単一Lambdaでも十分であること。
- 入力ファイルのサイズはたかだか数MBであり、ファイルサイズや実行時間の問題は顕在化しにくいこと
- azuchi内で最も使用しているサービスであり、実装が最も早く懸念事項が少ないこと

# 🪞 結果・影響

- **マイナスの結果**
	- 実行時間やメモリに不安が残る。今後、より大量・大規模なデータ利用する場合はCode Buildの使用や分割アップロードの実装を検討する。



