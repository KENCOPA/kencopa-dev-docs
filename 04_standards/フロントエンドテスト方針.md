---
type: note
moc: "[[ğŸ·ï¸standard]]"
---
# ğŸ¯ ç›®çš„ãƒ»å¯¾è±¡ç¯„å›²

- **ç›®çš„**
  - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã«ãŠã‘ã‚‹ãƒ†ã‚¹ãƒˆå®Ÿè£…ã®æ–¹é‡ã‚’å®šã‚ã€åŠ¹ç‡çš„ã‹ã¤å®Ÿç”¨çš„ãªãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚’ç¢ºç«‹ã™ã‚‹
- **å¯¾è±¡ç¯„å›²**
  - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºè€…å…¨å“¡
  - React ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨èˆ¬

# âŒ› èƒŒæ™¯

- å¾“æ¥ã®ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã§ã¯ç¶²ç¾…æ€§ã‚’é‡è¦–ã™ã‚‹ã‚ã¾ã‚Šã€é–‹ç™ºåŠ¹ç‡ã‚’é˜»å®³ã™ã‚‹å ´åˆãŒã‚ã£ãŸ
- å®Ÿéš›ã®é–‹ç™ºç¾å ´ã§ã¯ã€é«˜ãƒªã‚¹ã‚¯ç®‡æ‰€ã«é›†ä¸­ã—ãŸãƒ†ã‚¹ãƒˆãŒã‚ˆã‚Šå®Ÿç”¨çš„ã§ã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜
- ãƒãƒ¼ãƒ å…¨ä½“ã§ãƒ†ã‚¹ãƒˆå®Ÿè£…åˆ¤æ–­ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’çµ±ä¸€ã™ã‚‹å¿…è¦ãŒç”Ÿã¾ã‚ŒãŸ

# ğŸŒ³ å…¨ä½“æŒ‡é‡

- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã€ãƒ•ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã€ãƒ­ã‚¸ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã€E2E ãƒ†ã‚¹ãƒˆã¯ã„ãšã‚Œã‚‚å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“**
- **è‡ªåˆ†ãŒä¸å®‰ã«æ„Ÿã˜ã‚‹ç®‡æ‰€ã«é‡ç‚¹çš„ã«ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã€å˜ç´”ãªãƒ­ã‚¸ãƒƒã‚¯ã‚„å½±éŸ¿ç¯„å›²ãŒå°ã•ã„éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ãƒ†ã‚¹ãƒˆã‚’çœç•¥ã—ã¦ã‚‚æ§‹ã„ã¾ã›ã‚“**

## ãƒ†ã‚¹ãƒˆå®Ÿè£…ã‚’æ¨å¥¨ã™ã‚‹ç®‡æ‰€ï¼ˆä¸å®‰ã«æ„Ÿã˜ã‚„ã™ã„ç®‡æ‰€ï¼‰

- **è¤‡æ•°ã®æ¡ä»¶åˆ†å²ãŒã‚ã‚‹ãƒ­ã‚¸ãƒƒã‚¯**
- **å¤–éƒ¨ API ã¨ã®é€£æºéƒ¨åˆ†**
- **é‡‘é¡è¨ˆç®—ãªã©é‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯**
- **éå»ã«ãƒã‚°ãŒç™ºç”Ÿã—ãŸç®‡æ‰€**
- **è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†ã‚’è¡Œã†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
- **ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†**

## ãƒ†ã‚¹ãƒˆå®Ÿè£…ã‚³ã‚¹ãƒˆã®ç›®å®‰

- **30 åˆ†ä»¥å†…ã§æ›¸ã‘ãªã„è¤‡é›‘ãªãƒ†ã‚¹ãƒˆã¯ä¸€æ—¦è¦‹é€ã‚‹**
- **ãƒ¢ãƒƒã‚¯ãŒè¤‡é›‘ã«ãªã‚Šã™ãã‚‹å ´åˆã¯å®Ÿè£…æ–¹æ³•ã‚’è¦‹ç›´ã™**
- **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã‚ˆã‚Šé•·ããªã‚‹å ´åˆã¯è¦æ¤œè¨**

## ãƒ†ã‚¹ãƒˆå®Ÿè£…åˆ¤æ–­ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **ã‚¹ãƒ—ãƒªãƒ³ãƒˆãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°**ã§é«˜ãƒªã‚¹ã‚¯ãƒ»é«˜ä¸å®‰ç®‡æ‰€ã‚’æ´—ã„å‡ºã—ã€å¿…è¦ãªãƒ†ã‚¹ãƒˆã‚’æ±ºå®š
- **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼**ã§å¤‰æ›´ç¯„å›²ã«å¿œã˜ã¦è¿½åŠ ãƒ†ã‚¹ãƒˆã®è¦å¦ã‚’æ¤œè¨

## ã‚„ã‚‰ãªã„ã“ã¨

- StoryBook ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¯è¦–åŒ–

# ğŸƒ è©³ç´°

## ãƒ†ã‚¹ãƒˆã®ç¨®é¡ã¨ä½¿ç”¨ãƒ„ãƒ¼ãƒ«

### 1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ

- **ãƒ„ãƒ¼ãƒ«**: React Testing Library & Vitest
- **å†…å®¹**:

  - å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã‹ã‚’æ¤œè¨¼
  - Props ã‚„çŠ¶æ…‹ã«ã‚ˆã‚‹æŒ™å‹•ã®å¤‰åŒ–ã‚’ãƒ†ã‚¹ãƒˆ
  - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é€£æºã‚„ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æŒ™å‹•ã‚’ç¢ºèª

- **å…·ä½“ä¾‹**: `MyButton` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ

  ```tsx
  // __tests__/MyButton.test.tsx
  import { render, screen, fireEvent } from "@testing-library/react";
  import { describe, it, expect, vi } from "vitest";
  import MyButton from "../components/MyButton";

  describe("MyButton ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ", () => {
    it("ãƒ©ãƒ™ãƒ«ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã€ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã™ã‚‹", () => {
      const handleClick = vi.fn();
      render(<MyButton label="ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã­" onClick={handleClick} />);

      const button = screen.getByRole("button", { name: /ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã­/i });
      expect(button).toBeInTheDocument();

      fireEvent.click(button);
      expect(handleClick).toHaveBeenCalledTimes(1);
    });

    it("disabled prop ãŒ true ã®ã¨ãã¯ã‚¯ãƒªãƒƒã‚¯ã‚’å—ã‘ä»˜ã‘ãªã„", () => {
      const handleClick = vi.fn();
      render(<MyButton label="ç„¡åŠ¹" onClick={handleClick} disabled />);

      const button = screen.getByRole("button", { name: /ç„¡åŠ¹/i });
      expect(button).toBeDisabled();

      fireEvent.click(button);
      expect(handleClick).not.toHaveBeenCalled();
    });
  });
  ```

### 2. ãƒ•ãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆãƒ•ã‚©ãƒ¼ãƒ ï¼‰

- **ãƒ„ãƒ¼ãƒ«**: Vitest & @testing-library/react-hooks
- **å†…å®¹**:

  - useUpdateSiteForm ã®åˆæœŸå€¤ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€handleSubmit ã®å‹•ä½œã‚’ãƒ†ã‚¹ãƒˆ

- **å…·ä½“ä¾‹**: useUpdateSiteForm ã®ãƒ†ã‚¹ãƒˆ

  ```tsx
  // __tests__/useUpdateSiteForm.test.ts
  import { renderHook, act } from "@testing-library/react-hooks";
  import { describe, it, expect, vi } from "vitest";
  import {
    useUpdateSiteForm,
    UpdateSiteFormSchemaType,
  } from "../hooks/useUpdateSiteForm";

  describe("useUpdateSiteForm ãƒ•ãƒƒã‚¯", () => {
    const validDefaults: UpdateSiteFormSchemaType = {
      siteId: "S123",
      name: "ç¾å ´A",
      description: "è©³ç´°",
      address: "ä½æ‰€",
      clientName: "é¡§å®¢",
      startAt: null,
      endAt: null,
      departmentId: undefined,
      branchId: undefined,
    };

    it("åˆæœŸå€¤ãŒ defaultValues ã§ä¸Šæ›¸ãã•ã‚Œã‚‹", () => {
      const updateSite = vi.fn();
      const { result } = renderHook(() =>
        useUpdateSiteForm({ updateSite, defaultValues: validDefaults })
      );
      expect(result.current.form.getValues()).toEqual(validDefaults);
    });

    it("handleSubmit ã§ updateSite ãŒå‘¼ã°ã‚Œã€ãƒ•ã‚©ãƒ¼ãƒ ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹", async () => {
      const updateSite = vi.fn();
      const { result } = renderHook(() =>
        useUpdateSiteForm({ updateSite, defaultValues: validDefaults })
      );

      await act(async () => {
        await result.current.handleSubmit();
      });

      expect(updateSite).toHaveBeenCalledWith(validDefaults);
      expect(result.current.form.getValues()).toEqual(validDefaults);
    });

    it("ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼æ™‚ã«ã¯ updateSite ãŒå‘¼ã°ã‚Œãªã„", async () => {
      const updateSite = vi.fn();
      const { result } = renderHook(() => useUpdateSiteForm({ updateSite }));

      await act(async () => {
        await result.current.handleSubmit();
      });

      expect(updateSite).not.toHaveBeenCalled();
      expect(result.current.form.formState.errors.siteId).toBeDefined();
    });
  });
  ```

### 3. ãƒ­ã‚¸ãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼‰

- **ãƒ„ãƒ¼ãƒ«**: Vitest & @testing-library/react-hooks
- **å†…å®¹**:

  - ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ‡ã‚Šå‡ºã—ãŸã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ç›´æ¥ãƒ†ã‚¹ãƒˆ
  - å…¥åŠ›ã¨å‡ºåŠ›ã€å†…éƒ¨ã‚¹ãƒ†ãƒ¼ãƒˆé·ç§»ã‚’æ¤œè¨¼

- **å…·ä½“ä¾‹**: æ—¥ä»˜ç¯„å›²ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã† useDateRange ãƒ•ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ

  ```tsx
  // hooks/useDateRange.ts
  import { useState } from "react";

  export function useDateRange() {
    const [range, setRange] = useState<{ start?: Date; end?: Date }>({});
    const setStart = (d: Date) => setRange((r) => ({ ...r, start: d }));
    const setEnd = (d: Date) => setRange((r) => ({ ...r, end: d }));
    const isValid = () => {
      if (!range.start || !range.end) return false;
      return range.start <= range.end;
    };
    return { range, setStart, setEnd, isValid };
  }

  // __tests__/useDateRange.test.ts
  import { renderHook, act } from "@testing-library/react-hooks";
  import { describe, it, expect } from "vitest";
  import { useDateRange } from "../hooks/useDateRange";

  describe("useDateRange ãƒ•ãƒƒã‚¯", () => {
    it("æ—¥ä»˜ç¯„å›²ã®åˆæœŸçŠ¶æ…‹ã¯ç„¡åŠ¹", () => {
      const { result } = renderHook(() => useDateRange());
      expect(result.current.isValid()).toBe(false);
    });

    it("é–‹å§‹æ—¥ãƒ»çµ‚äº†æ—¥ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã¨æœ‰åŠ¹åˆ¤å®šã•ã‚Œã‚‹", () => {
      const { result } = renderHook(() => useDateRange());
      act(() => {
        result.current.setStart(new Date("2025-01-01"));
        result.current.setEnd(new Date("2025-01-10"));
      });
      expect(result.current.isValid()).toBe(true);
    });

    it("é–‹å§‹æ—¥ãŒçµ‚äº†æ—¥ã‚ˆã‚Šå¾Œã ã¨ç„¡åŠ¹", () => {
      const { result } = renderHook(() => useDateRange());
      act(() => {
        result.current.setStart(new Date("2025-02-01"));
        result.current.setEnd(new Date("2025-01-10"));
      });
      expect(result.current.isValid()).toBe(false);
    });
  });
  ```

### 4. E2E ãƒ†ã‚¹ãƒˆï¼ˆLLM ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰

- **ãƒ„ãƒ¼ãƒ«**: workflow-use
- **å†…å®¹**:
  - LLM ã‚’æ´»ç”¨ã—ãŸç›´æ„Ÿçš„ãªãƒ†ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼ç”Ÿæˆã‚’æ¤œè¨
  - Cypress/Playwright ã®ä»£æ›¿ã¨ã—ã¦ã€è‡ªç„¶è¨€èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’è¨˜è¿°ã™ã‚‹ã¨ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè‡ªå‹•ç”Ÿæˆãƒ»å®Ÿè¡Œã•ã‚Œã‚‹ä»•çµ„ã¿ã‚’ç›®æŒ‡ã™
  - ç¾æ™‚ç‚¹ã§ã¯ PoC æ®µéšã ãŒã€æœ€çµ‚çš„ã«ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªã®è‡ªå‹•ç”Ÿæˆã¨çµæœæ¤œè¨¼ã¾ã§ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«è¡Œãˆã‚‹ä½“é¨“ã‚’ç›®æŒ‡ã™

# **ğŸ“ ä»˜éŒ²ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰**

- **ç”¨èªé›†**

  - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ: å€‹åˆ¥ã® React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æŒ¯ã‚‹èˆã„ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆ
  - ãƒ•ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®å‹•ä½œã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆ
  - ãƒ­ã‚¸ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ†é›¢ã—ã¦ãƒ†ã‚¹ãƒˆã™ã‚‹æ‰‹æ³•

- **å‚è€ƒãƒ„ãƒ¼ãƒ«**

  - React Testing Library: https://testing-library.com/docs/react-testing-library/intro/
  - Vitest: https://vitest.dev/
  - @testing-library/react-hooks: https://react-hooks-testing-library.com/

- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€å¼**
  - ä¸Šè¨˜å…·ä½“ä¾‹ã‚’å‚è€ƒã«ã€å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é©ã—ãŸå½¢ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã—ã¦ãã ã•ã„
