---
type: note
tags:
- guide
---
# 🎯 目的・範囲

- **目的**
  - 持続可能な状態を維持し、形骸化させないため
  - obsidian を中心とした AI 駆動開発環境を整備するため
- **対象範囲**
  - KENCOPA で開発を行う人全員
  - LLM 開発ツール（Cursor / Devin / Cline etc ...）

# ⌛ 背景

- 今までは Notion で開発ドキュメントを管理していたが、下記のような課題があった。
  1.  cursor から開発ドキュメントが参照しにくい
  2.  アーキテクチャ図のようなダイアグラム（Excalidraw / Draw.io）が管理しにくい
- これまで騙し騙し進めてきたが、AI エージェントのような複雑な実装や既存機能に対するリファクタリング・追加機能実装のように設計がより重要なタスクが増加し上記課題が看過できない状態となった。
- そのため、開発ドキュメントの管理方法を再考し obsidian を利用する運びとなった。

> [!question] Notion MCP を使えばいいのでは？
> そうなのかもしれない。が、Notion API を裏で叩いていること・オンラインであることから MCP を自由自在に改造できないのが気になる。Obsidian であればローカルのテキストファイルであるためいくらでも MCP を工夫できるし改造できる。
>
> > “The best format to store knowledge persistently is plain text.”
> > — The Pragmatic Programmer, Chapter 3: The Power of Plain Text

> [!question] Notion にも Draw.io の拡張機能あるじゃん
> 使ったけど使いにくかった... github での管理も使いにくかった...
> 更新が面倒で死んでいったドキュメントがたくさんある...

# 🌳 全体指針

## 「全体像の地図（MOC）」で書類を管理するとは？

このガイドラインで一番大切な考え方が「**MOC（Map of Content）**」です。
これまでの書類管理は、パソコンの「フォルダ」にファイルを仕分ける方法が一般的でした。
しかし、この方法には「**コウモリ問題**」という悩みがつきまといます。

#### フォルダ分けの悩み：「コウモリ問題」とは？

> **コウモリ問題とは？** 童話で、コウモリが鳥の仲間に入ろうとしたり、獣の仲間に入ろうとしたりする話があります。このように、「あれでもあり、これでもある」というものを分類する際に、「一体どっちに入れればいいの？」と迷ってしまう問題のことです。

例えば、「**AIを使った新しいログイン機能の設計図**」という書類があったとします。

- 「AI関連」フォルダに入れるべきか？
- 「ログイン機能」フォルダに入れるべきか？
- 「設計図」フォルダに入れるべきか？

このように、どこか一つのフォルダに入れると、別の角度から探したい時に見つけにくくなってしまいます。これがフォルダ分けの限界であり、「コウモリ問題」です。

#### 解決策：フォルダではなく「ラベル」で管理する

そこでObsidianでは、**書類を特定のフォルダに固定するのではなく、すべての書類を一つの大きな箱（`02. resources/`）に入れてしまいます。**

そして、各書類に「`#AI`」「`#ログイン機能`」「`#設計図`」のように、関連するキーワードを「**ラベル（しおりや付箋のようなもの）**」として貼り付けていくのです。
#### 「MOC（コンテンツの地図）」の正体

この「ラベル」付けこそが、MOCの基礎となります。

MOCとは、特定のテーマに関連する書類へのリンクをまとめた、特別な「目次ページ」のことです。例えば、「AI関連の書類一覧」というMOC（目次ページ）を作るとします。
Obsidianの機能を使えば、**「`#AI`」というラベルが付いた書類を自動的に探し出して、一覧表示してくれます。**

つまり、私たちは個々の書類にキーワードのラベルを貼っておくだけで、あとはMOCが自動的に関連書類を集めて「地図」や「目次」を作ってくれるのです。

これが、ガイドラインにある「**全体写真のラベルで管理するMOC**」の本当の意味です。

- **全体写真**: プロジェクトやテーマの全体像（＝目次ページ、MOC）
- **ラベルで管理する**: 個々の書類に付けたキーワード（タグやリンク）を元に整理する

この方法なら、先ほどの「AIを使った新しいログイン機能の設計図」は、「AI関連のMOC」「ログイン機能のMOC」「設計図のMOC」の**すべてに自動で表示される**ため、どこからでも簡単に見つけ出すことができます。コウモリ問題が見事に解決されるのです。

### この仕組みのまとめ

1. **とにかく１つの場所に保管する**
    - 新しく作った書類は、すべて`02. resources/`という大きな箱に放り込みます。フォルダ分けで悩む必要は一切ありません。
2. **キーワード（ラベル）を付ける**
    - その書類が何に関するものか、キーワードとなるタグ（例：`#設計図`）を付けたり、関連する他の書類へリンク（例：`[[関連する会議の議事録]]`）を貼ったりします。
3. **「地図（MOC）」から眺める**
    - 「設計図の一覧が見たいな」と思ったら、`01. views/`の中にある「設計図MOC」のページを開きます。
    - そこには、「`#設計図`」というラベルが付いた書類が自動的にリストアップされており、すぐに目的の書類を見つけることができます。

## 同期は Github で行う

- obsidian 公式（有料）や Fly.io など無料でリアルタイム同期する方法はあるがそれらは採用せず、Github での明示的な同期とする。
- リアルタイム同期は魅力的ではあるがコンフリクトの危険性がある。また、Github の協力な履歴管理の仕組みは捨てがたいためである。
## 進捗管理はLinear、ナレッジマネジメントはObsidian

- 進捗管理（エピック管理・バックログ管理 etc...）はリアルタイム性が大事なのでLinear。
- ナレッジはAIも知りたいのでObsidian。

## 仕組み化・仕組み化・仕組み化

- めんどくさい運用や個人に依存する運用にはしない
- 形骸化させないために徹底的に仕組み化する
- ありがたいことに obsidian は JS と CSS を書くことでだいたいなんでもできる
- めんどくさいと思ったことはすぐに実装！
# 🍃 詳細

## Git の運用

- main ブランチ１本で運用。
- 具体的な問題が発生するまでは複雑なルールは設けない。

## ディレクトリ構造

```text
.
├── 01. views/      # resourcesをmoc単位にまとめる
├── 02. resources/  # noteをひたすらためる
└── 03. templates/  # テンプレート一覧（ここからノートを作成）
```

### 01. views
resourceをdataview（拡張機能）でmoc単位もしくはstatus単位にまとめ検索性能を上げるためのディレクトリ。viewのリンク先はviewもしくはノートとなる。
### 02. resources
全てのノートを格納するディレクトリ。resources内に階層構造は持たせず、tagとmocで後から検索しやすくしておく。
- [[🗒️ Tagの運用ガイドライン]]
- [[🗒️ MOCの運用ガイドライン]]
### 03. templates
各種ノートのtemplateを格納しておく。ノートの種類については次章参照。
## ノートの種類と定義・役割・管理指針

### 01. design-document

サービス全体やモジュール単位の高レベルの設計

### 02. ticket-specification

チケット / タスクレベルの詳細設計・仕様

### 03. ADR（architecture-decision-record）

design-document / ticket-specification の各種意思決定を記録

### 04. guideline

特定業務や資料の指針や指標・方向性

### 05. procedure-manual

guideline に基づいた実際の手順や手引き
- [[🗒️ procedure-manualの定義・役割・管理指針]]

### 06. excalidraw

上記 01~05 のドキュメントに図が必要な場合は excalidraw で作図し、リンクを貼る。

# **📎 付録（必要に応じて）**

- 用語集
- 参考リンク集
- テンプレート一式
