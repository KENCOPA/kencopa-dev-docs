---
type: note
tags:
- Devin
---
---

## 1. 目的と基本原則

### 1.1. 目的

本ガイドラインは、Devinを自社の開発フローに安全かつ効果的に組み込み、生産性・品質・スピードの向上と技術負債の低減を実現することを目的とします。Devinを単なる自動生成ツールではなく、**「優秀な新入社員」として扱うことが重要です。Devinは熟練エンジニアの置き換えにはならず、人間の補助として生産性を高めることを目指します。

#### 目標

- **開発者1人当たりの成果を2倍に拡大**：反復的な実装・テスト・ドキュメント作成を自動化し、創造的な設計や意思決定に集中できる時間を増やす。
    
- **レビュー負担の軽減**：自動レビューやセルフレビューの活用により、品質を保ちながらレビュー工数を削減する。
    
- **開発サイクルの高速化**：1週間のスプリント内でより多くのタスクを完了し、早い価値提供を実現する。
    
- **コード品質の向上と標準化**：コーディング規約や潜在バグの指摘を自動化し、チーム全体の品質底上げを図る。
    

### 1.2. 基本原則

#### Devinを**新入社員として扱う**

- Devinは「自律的にコードを書くAIエンジニア」ですが、判断力はまだ未熟です。ベテラン開発者が新人に説明するレベルの詳細な指示を与える必要があります。曖昧な指示では意図から外れた実装を行う傾向があるため、常に目的・仕様・制約を明示してください。
    

#### 明確な目的と成功基準を示す

- **Why・What・Howを明確に**：実装の目的、期待される動作、守るべき制約や規約を記述します。タスクが完了したかどうかを客観的に判断できる検証方法（テストコマンドやCI基準など）も必ず指定します。
    

#### 小さく分割し、チェックポイントを設ける

- 複雑なタスクをいきなり依頼せず、**小さなステップ**に分割します。作業の区切りごとに「計画→実装→テスト→修正→確認→次へ」というチェックポイントを設定し、人間が方向性を確認します。
    
- Devinのパフォーマンスは長時間のセッションで低下しやすいため、1回のセッションを10 ACU（標準では30分程度）以内に収めるよう意識します。
    

#### 明確なスタート地点と参考情報を伝える

- リポジトリ名、関連ドキュメントや既存モジュール、着手すべきファイル・ディレクトリなど、作業開始地点を指定します。
    
- 既存のパターンやコード例、利用ライブラリの最新ドキュメントへのリンクも提示し、Devinが最短経路で目的地にたどり着けるようにします。
    

#### フィードバックループを強化する

- Devinはエラーやテスト結果から学習しながら修正を繰り返します。CI・テスト・型チェック・Lintなどの**強いフィードバックループ**を提供することで性能が大きく向上します。
    
- ユニットテストや統合テストを充実させ、Devinが修正すべき箇所を特定できるようにしておきます。
    

#### 人間の監督を前提とする

- Devinによるコードは、**新人エンジニアの成果物と同程度にレビューとテストが必要**であると認識します。最終的な品質保証とアーキテクチャ判断は人間が責任を負います。
    

#### 現実的な期待値を持つ

- AI導入による生産性向上は10〜30％程度とされており、大規模組織ではエンジニアの作業時間の一部しかコード実装に費やされないため効果も限定的です。過度な期待をせず、使いどころを見極めながら導入します。
    

---

## 2. セットアップと環境構築

Devinはセッション開始時に仮想マシンのスナップショットを読み込みます。**環境の整備はパフォーマンスに直結する**ため、以下を徹底します。

### 2.1. Devin Machine 設定・保守

Devinがリポジトリにアクセスし、安全に作業を行うための環境を「Devin Machine」と呼びます。Devinのパフォーマンスは、この環境の質に大きく依存するため、設定と保守を適切に行います。

#### A. 初期セットアップ

- **タイミング**: 新しいGitHubリポジトリを作成した際、必ず実施する。
    
- **担当者**: 当該リポジトリの主担当エンジニア（フルタイムメンバー）。
    
- **設定内容**:
    
    1. **リポジトリの登録とクローン**：利用するリポジトリすべてにDevinがアクセスできるよう、GitHubアカウントと連携します。
        
    2. **依存関係のインストール**：VS Code等を利用して必要なコンパイラ、パッケージ、テスト・Lintツールなどをインストールし、`npm install` や `pip install -r requirements.txt` などのコマンドを実行します。チームと同じ言語バージョンやパッケージを揃えます。
        
    3. **環境変数**： `.env` ファイルや`direnv`などを活用し、各リポジトリ特有の環境変数を登録します。
        
    4. **認証情報の設定**：Devin専用のGitHubアクセストークンを発行し、リポジトリのSecretsに登録する。権限は必要最小限（コードのRead/Write、Pull Requestの作成）に留める。
        
    5. **Git Pull コマンドの登録**：各セッション開始時に実行する `git pull` 等の更新コマンドを設定します。
        
    6. **リポジトリ情報の提供**: リポジトリのアーキテクチャ、主要なライブラリ、コーディング規約、デプロイ手順など、開発に必要な背景情報を文書化して提供する。
        

#### B. マシンメンテナンス

- **目的**: Devinの作業環境を常に最新の状態に保ち、パフォーマンスを維持する。
    
- **タイミング**:
    
    - **定例**: 毎月1回、月初に実施する。
        
    - **臨時**: 開発言語のバージョンアップ、主要ライブラリの変更、CI/CDプロセスの大幅な変更など、Devinの動作に影響を与えうる変更があった場合に速やかに実施する。
        
- **担当者**: 主担当エンジニア。
    
- **内容**:
    
    - セットアップスクリプトやリポジトリ情報が現状の開発環境と乖離していないか確認し、更新する。
        
    - Devinのアクセストークンや権限設定に問題がないか定期的にレビューする。
        

### 2.2. セキュリティと権限管理

- **専用アカウントの利用**：Devinが外部サービスを利用する場合、専用のメールアドレスとアカウントを作成し、その資格情報をSecretsに保存します。
    
- **最小権限の原則**：Secretsは必要最低限の権限で設定し、読み取り専用のAPIキーを利用します。
    
- **環境の分離**：本番環境にはアクセスさせず、開発/ステージング環境で作業させます。
    
- **機密情報の扱い**：顧客情報や個人情報はプロンプトに含めず、必要な場合は匿名化やダミーアカウントを使用します。
    
- **Secretsの種類**：グローバルSecrets、リポジトリSecrets、セッションSecretsを使い分けます。グローバルSecretsは暗号化され、組織内の全セッションで利用可能ですが、閲覧や編集は管理者のみが行えます。
    
- **TOTPやCookie**：二要素認証が必要な場合はTOTPやサイトCookieを登録して自動ログインを実現します。ただし、有効期限や使用環境を明記し、不正利用を防ぎます。
    

---

## 3. タスクの選定と指示方法

### 3.1. タスク選定ガイド

1. **検証のしやすさ**：CIが通るかどうかや1つの画面で完結する機能など、実装内容の確認が単純なタスクを優先します。
    
2. **スコープの明確さ**：依頼内容が狭く、既存コードを参照することで実装できるタスクが適しています。
    
3. **時間規模**：30分〜1時間程度で終わる小さなタスクを複数依頼し、パラレルに進めます。長時間のタスクは分割し、前提調査はDevin SearchやDeepWikiで実施します。
    
4. **ジュニアエンジニアでも解決可能な難易度**：明確な判断や深い業務知識を必要とするタスク、ビジュアルデザインやモバイルアプリ作成などは対象外とし、人間が担当します。
    

### 3.2. 指示の出し方（Prompting）

#### 指示テンプレート

指示（プロンプト）には以下の要素を盛り込みます：

|要素|内容|
|---|---|
|**目的 (Why)**|その実装が解決する問題やビジネス上のゴールを明示します。|
|**仕様 (What)**|期待する動作や実装する機能の詳細を具体的に記述します。既存コードの参照先やファイル名、使用するライブラリ、入力・出力の形式等も記載します。|
|**制約 (How)**|コーディング規約、パフォーマンス要件、使用禁止API等を明記します。どうしても避けてほしい設計や実装方針があれば伝えます。|
|**成功条件**|テストがパスすること、CIが通ること、特定のアウトプットが得られることなど、検証手順を具体的に記述します。|

#### 良い指示の例

> **例**：「`orderService.js` 内の `getOrderDetails` クエリを最適化してください。`order_id` と `product_id` に複合インデックスを追加し、関連情報は `JOIN` を用いて `products` テーブルから取得します。変更後は `tsc` で型エラーが出ないことを確認し、`OrdersService.test.ts` のテストを全て通過させてください」。

この例では、**具体的な処理内容、参照すべきファイル、採用する設計、検証方法**が明示されています。対して「パフォーマンスを改善してください」のような曖昧な指示は避けるべきです。

#### 指示のポイント

- **決断を代理させない**：判断が必要な部分やアーキテクチャ上の選択肢は人間が決め、Devinにはそれを実行させます。
    
- **参考リンクとサンプルコード**を提供して学習コストを下げます。
    
- **タスクの範囲を限定**し、どこまでやればよいかを明確にします。
    
- **チェックポイントや検証方法**を明示し、失敗した場合にどのように修正すべきかを説明します。
    
- **依頼しないタスクを明示**：「データベース構造の大規模変更」「モバイルアプリの新規作成」「Figmaデザインからの実装」などはDevinのコア能力を超えるため人間が担当します。
    

---

## 4. 具体的な利用フロー (Linear連携)

Devinへのタスク依頼と進捗管理は、Linear上で完結させることを原則とします。

1. **Issue作成とサブIssue化**: スプリント計画会で決定したタスクを、担当者がLinear上にIssueとして作成します。Devinが担当する具体的な作業内容をサブタスクに分割し、目的・仕様・制約・成功条件を記述します。
    
2. **Devinへのアサインと調査 (Devin Search)**:
    
    - Issueの担当者 (Assignee) を Devin に設定します。
        
    - アサインをトリガーに**Devin Search**が自動実行され、関連コードや設計情報を調査し、結果をIssueのコメントとして投稿します。
        
    - **Devin Search**は、新規機能の設計調査、リファクタリングの影響範囲調査、バグの関連箇所調査などにも利用できます。
        
3. **実装指示の更新**: 担当者は、Devin Searchの結果を参考に、IssueのDescriptionに詳細な実装指示を追記・編集します。
    
4. **実装とプルリクエスト作成**:
    
    - Devinは指示内容に基づき、コーディング、テスト作成、デバッグなどを自律的に行います。
        
    - 作業が完了すると、GitHubにプルリクエストを作成し、`devin`ラベルを付与します。
        
    - 作成したPRのURLをIssueにコメントし、Issueのステータスを `In Review` に自動で変更します。
        
    - PRの説明にはDevinが要約を記述し、担当者は補足情報を追記します。
        
5. **レビュー (セルフレビューとレビュワー補助)**:
    
    - **セルフレビュー**: PR作成前にDevinにセルフレビューを実行させ、Lintエラーやタイポを修正させます。
        
    - **自動レビュー**: PRが作成されると、CIプロセスの一部としてDevinが自動でレビューコメントを追記し、人間レビュワーの負担を軽減します。
        
    - **チェックポイント**: 複雑な作業では、「データベース設計完了後に報告→バックエンド実装→フロントエンド実装」のように段階的に進めさせ、人間が各段階で確認します。
        
6. **人間レビューとマージ**:
    
    - Devinの結果を元に人間がレビューします。要点を絞ったレビューにより心理的負担を減らしますが、最終的な品質保証は人間が行います。
        
    - 特定の条件下（軽微な修正でテストが十分な場合など）では、人間レビューのスキップも検討可能です。その場合、実装担当者はE2Eテストを含む最終確認に責任を負います。
        
    - PRがマージされると、関連するサブIssueは自動で `Done` になります。
        
7. **Post-Taskレビュー**: タスク完了後は指示内容や環境設定、Knowledge、Playbookを更新し、次回の改善に繋げます。
    

### 失敗時の対処

- **早期に損切りする**：Devinが指示を無視したり、同じ作業を繰り返すなど進捗が止まった場合は、セッションを終了して新しいセッションを立ち上げるか、人間が作業を引き継ぎます。
    
- **タスクを再分割**：難易度が高い場合はタスクをさらに小分けにし、途中までの成果物を確認したうえで次のステップを指示します。
    

---

## 5. 高度な活用 (Knowledge & Playbook)

### 5.1. Knowledge（知識ベース）の活用

- **役割**: プロジェクト全体に関する背景情報（コード規約、デプロイ手順、テスト手順、独自ライブラリの使い方など）を保管し、Devinがコードベースを横断的に理解できるようにします。
    
- **オンボーディング**: READMEや既存ドキュメントをもとに自動生成されますが、その内容を確認・修正し、必要であれば `.rules` や `.mdc` などの特殊ファイルに明文化します。
    
- **運用**: Knowledgeはトリガー（対象リポジトリやファイル）に基づいて取得されます。重要な情報はすべてのリポジトリにピン留めし、適切に引き出せるようにしてください。
    
- **Devin Wiki**: リポジトリのコードベースを解析し、構造や機能に関するドキュメント（Wiki）を自動生成する機能です。生成されたWikiはコードのスナップショットであるため、アーキテクチャの意図など、コードから読み取れない情報はエンジニアが追記・修正する必要があります。
    

### 5.2. Playbook（指示テンプレート）の整備

- **役割**: 同じ種類のタスクを何度も依頼する場合に、再利用可能な指示のテンプレート（Playbook）を作成します。
    
- **構成要素**: Playbookには以下のセクションを含めることが推奨されます。
    
    - **Procedure**：設定・実装・成果物提出などを時系列で箇条書きにし、各ステップに動詞を入れて明確化する。
        
    - **Specifications**：完了後に満たすべき条件（テストやCIの通過など）。
        
    - **Advice**：Devinの先入観を修正するためのコツや推奨プラクティス。
        
    - **Forbidden Actions**：絶対に行ってはいけないこと。
        
    - **Required from User**：事前に用意するべき情報やアカウントなど。
        
- **運用**: Playbookはチームやコミュニティで共有し、改善を重ねながら使い回します。
    

### 5.3. APIや外部ツールとの連携

- PRレビューやCIパイプラインにDevinを組み込む場合、GitHub Actions等からDevinのAPIを呼び出します。APIキーはGitHub Secretsに設定し、Devinはレビューコメントのみを行うことを徹底します。
    
- DevinのPRレビューはバグをすべて見つけられるわけではないため、人間のレビューは必ず残します。
    

### 5.4. Tips・追加の推奨事項

- **テストカバレッジの向上**：AIが頻繁に触れる箇所（ホットスポット）のテストを充実させると、安心して自動化できます。
    
- **知識ベースへの継続的な追記**：Devinが誤った仮定に基づいて実装した場合は、その修正内容をKnowledgeに書き足し再発を防ぎます。
    
- **CI/Linterエラーへの介入**：DevinがLinterエラーの修正に時間を費やしている場合は人間が介入し、効率的に解決します。
    
- **Secretsのノートを活用**：APIキーやCookieにメモを付け、使用環境や有効期限などを共有します。
    
- **複数のDevinsで並列化**：一日の初めに複数のDevinsに小さなタスクを割り振り、午後にまとめてPRを確認すると効率的です。
    

---

## 6. 限界と注意点

- **デバッグ能力の限界**：現在のAIは深いデバッグや運用中のサービス障害への対応が得意ではありません。根本原因の推定や疑わしいポイントの列挙をDevinに任せ、実際の調査・修正は人間が行います。
    
- **視覚的な判断が苦手**：UIの微調整やデザインの忠実な再現は不得意です。コンポーネント化されたデザインシステムを用意し、人間が微調整してください。
    
- **知識の鮮度**：ベースモデルの訓練時点の知識に依存しているため、新しいライブラリやバージョンはわかりません。最新ドキュメントへのリンクを提示し、過去のパターンに引きずられないようにします。
    
- **長時間セッションでのパフォーマンス低下**：長いセッションでは誤りが増えるため、適宜区切って新しいセッションを開始します。
    

---

## 7. 参考文献・出典

- Cognition社「Coding Agents 101: The Art of Actually Getting Things Done」
    
- Devin公式ドキュメント「Instructing Devin Effectively」「Repo Setup」「Knowledge Onboarding」「Secrets & Site Cookies」
    
- Devin公式ブログ「Devin 101: Automatic PR Reviews with the Devin API」
    
- Nx.dev ブログ「A Practical Guide on Effective AI Use - AI as Your Peer Programmer」


```javascript





