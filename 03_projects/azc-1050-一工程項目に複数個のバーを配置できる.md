---
type: note
tags:
- azc-1050
---
> [!info] 必要なセクションを選択して使用してください！

# 🔗 前提条件・依存関係
- なし

# ✅ 機能要件

- **概要フロー**
  - ガントチャート上で1工程につき、一つのバー（期間）しか設定できないが、複数設定できるようにする

###  複数期間設定機能

1. システムは、一つの工程項目に対して複数の期間（開始日と終了日のペア）を設定できること
2. システムは、追加された複数の期間をガントチャート上で個別のバーとして表示できること 
3. システムは、ユーザーが工程項目に新しい期間を追加できること

### 期間マージ機能

1. システムは、期間が重複または連続する場合（ある期間の終了日と別の期間の開始日が同じ日付、またはある期間が別の期間と重なる場合）、自動的に一つの期間としてマージすること
2. システムは、期間の編集によって重複が発生した場合、保存時に自動的にマージを行うこと


# 🎯 受け入れ基準

- **正常系シナリオ**（例：ステータス 200 ＋期待レスポンス）
	- 1つの工程項目に工程バーを複数個表示することができる
	- 1つの工程項目に複数の開始と終了日を登録できる
	- ある期間の終了日が、他の期間の開始日より後日に設定された場合、一つの機関としてマージされる
- **異常系シナリオ**（例：バリデーションエラー、外部 API 障害時）
	- なし
- **Edge Case**（例：空配列、最大長文字列）
	- なし

# 🖼 UI/UX

- 期間入力フォームを、協力会社追加と同じ形式にする

# 📊 データモデル設計

- **テーブル／コレクション変更**
  - ProcessSchedulingItem, ProcessOperationItemにそれぞれstartDate, endDateを指定していた
  - それを1対多の関係に変更する
  - 新規テーブルは以下
	  - `ProcessSchedulingItemPeriods`
		  - id (PK)
		  - processSchedulingItemId (FK)
		  - startDate
		  - endDate
	  - `ProcessOpeartionItemPeriods`
		  - 同上
  - 現在はまだリリース前であるため、既存のデータ構造は維持しない。よって、元のProcessScheduling(Operation)ItemからstartDate, endDateを削除する
# 🔌 API／インターフェース仕様
- 変更なし
# 🛑 エラーハンドリング
- 変更なし
# 🔒 セキュリティ・権限
- 変更なし
# 🧪 テストケース
- **単体テスト項目**

# 📎 補足・参考資料

- **関連リンク**
- **コードスニペット／設定例**


