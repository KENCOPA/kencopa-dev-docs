---
type: note
moc: "[[🏷️概念設計書]]"
---


# バージョン管理機能

## 全体概要

### 概要

変更履歴・意思決定の過程・復元操作を体系的に記録・管理する機能群。
単なる保存ではなく「バージョン」として管理することで、過去状態の比較・復元・監査証跡を可能にし、AI学習や技術継承にも活用できる。

### ビジネス目標

* **リスク低減**：誤操作や不適切な変更から復旧できる仕組みを提供し、プロジェクトリスクを最小化

### 全体受け入れ条件

* ユーザーは現在の工程表を「バージョン」として保存でき、コメント・タグ・名前を残せる
* ユーザーは保存されたバージョンを一覧・タイムライン形式で確認できる
* ユーザーは保存済みバージョンを読み取り専用でプレビューでき、現在版と差分を比較できる
* ユーザーは過去バージョンを「新しいバージョン」として復元できる（履歴は保持される）

---

## バージョン保存機能

### ステータス

* [x] 検討中（PdMが要件を整理している段階）
* [x] 概念設計中（PdMが概念設計を行っている段階）
* [ ] 概念設計確定（PdMが概念設計を固め、エンジニアに渡せる状態）
* [ ] 実装中（Engが開発中）
* [ ] 実装完了（機能がリリース済み）
* [ ] 不採用（検討の結果ボツになったもの）

### 機能概要

現在の工程表を「バージョン」として保存する機能。保存時に名前・コメント・タグを付与でき、保存者とタイムスタンプを自動で記録する。記録は「過去状態の参照」「比較」「復元」や「監査証跡」として活用される。

### ビジネス目標

* 工程表の断面を履歴として残し、過去の状態と比較・復元できるようにする
* 監査・訴訟リスクに備えて、変更履歴を正式に記録する
* 工事進行中の意思決定過程をデータとして蓄積し、AI学習・技術継承に役立てる

### 機能要件（ユーザーストーリー形式）
#### ユーザーは現在の工程表を「バージョン」として保存できる
#### ユーザーは保存時に **バージョン名** を入力できる
#### ユーザーは保存時に **コメント** を残せる（変更内容・意図など）
#### ユーザーは保存時に **タグ** を付与できる（マイルストーン、承認済みなど）


---

## バージョン管理・閲覧機能

### ステータス

* [x] 検討中（PdMが要件を整理している段階）
* [x] 概念設計中（PdMが概念設計を行っている段階）
* [ ] 概念設計確定
* [ ] 実装中
* [ ] 実装完了
* [ ] 不採用

### 機能概要

保存されたバージョンを一覧で確認し、必要に応じて詳細をプレビューできる機能。タイムライン形式やリスト形式で履歴を俯瞰し、過去のバージョンを読み取り専用モードで表示する。現在版との差分やコメント情報を確認できるため、意思決定の履歴や変更の背景を透明化できる。

### ビジネス目標

* **履歴追跡**：いつ、誰が、どのように変更したかを一目で把握できる
* **透明性向上**：承認・意思決定の過程を可視化し、監査対応やチーム内共有に活用できる
* **効率的な比較**：過去のバージョンと現在版を並べて違いを確認し、復元や再利用の判断を支援する

### 機能要件（ユーザーストーリー形式）

#### ユーザーは保存済みバージョンの一覧を確認できる（バージョン名・作成者・日時・コメント）
#### ユーザーはバージョンをタイムライン形式で視覚的に表示できる

#### ユーザーは特定バージョンを読み取り専用でプレビューできる

#### ユーザーはプレビュー中に編集ができない

#### ユーザーはバージョンの詳細情報（コメント、タグ、保存者、タイムスタンプ）を確認できる

---

## バージョン復元機能

### ステータス

* [x] 検討中（PdMが要件を整理している段階）
* [x] 概念設計中（PdMが概念設計を行っている段階）
* [ ] 概念設計確定
* [ ] 実装中
* [ ] 実装完了
* [ ] 不採用

### 機能概要

過去のバージョンを選択して、現在の工程表に復元できる機能。
復元は直接上書きするのではなく「新しいバージョン」として作成され、履歴が保持される。
復元前に差分を確認し、影響範囲を把握した上で最終確認を行える。

### ビジネス目標

* **リスク回避**：誤操作や不適切な変更があっても、過去の状態に安全に戻せる
* **完全なトレーサビリティ**：復元操作そのものも新しいバージョンとして記録されるため、履歴が欠けない
* **意思決定の裏付け**：復元理由をコメントとして残すことで、将来の監査やチーム学習に役立つ

### 機能要件（ユーザーストーリー形式）

#### ユーザーは過去のバージョンを復元できる（新しいバージョンとして保存される）
#### システムは復元元バージョンの情報を記録する
#### ユーザーは復元理由をコメントとして入力できる（必須）


