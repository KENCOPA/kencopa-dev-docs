# 工種体系マスタ管理システム

## 全体概要
### 概要
建築／土木／設備に対応した3階層（大分類→工種→細別）の工種体系を管理し、所要日数・歩掛と連携する統合マスタ。
複数マスタ（会社別・拠点別・案件別）を切替可能で、工程表生成／集計に直接利用する。
将来的には、蓄積した工種知識をAIのナレッジベースとして照会できる設計。

### ビジネス目標
- 現場・会社ごとの差異を吸収しつつ標準化を推進する。
- 日数ベース／歩掛ベース双方で、工程表生成の精度と再現性を高める。
- 複数現場・拠点でマスタ差異を安全に運用（切替・版管理・適用範囲の明確化）。
- 生成AIが参照可能な構造化知識を蓄積し、将来的な自動設計・自動見積の基盤にする。

### 全体受け入れ条件
- ユーザーは 3階層（大分類・工種・細別）の工種体系をツリー構造で直感的に管理できる。
- ユーザーは 工種体系マスタを複数作成・切替・複製・アーカイブでき、現場や拠点ごとに適切な体系を適用できる。
- ~~ユーザーは **工種ごとの基準作業日数（一式単位）**を設定・編集・削除でき、工程表生成に活用できる。~~
- ユーザーは **細別ごとの基準作業日数（数値＋単位ベース）**を設定・編集・削除でき、条件付きの登録も可能である。
- ユーザーは **細別レベルの歩掛（労務／機械／資材単位）**を条件付きで複数登録・管理でき、工数算出やリソース計画に活用できる。
- ~~ユーザーは **条件項目（選択式・数値・真偽値・範囲等）**を追加・編集・削除でき、プリセットからも選択可能である。~~
- ~~ユーザーは 条件を組み合わせて所要日数や歩掛に分岐設定でき、現場条件に応じた精度の高い工程計画が可能になる。~~
- ユーザーは 登録済みのデータを検索・フィルタリングし、必要な工種・細別・条件を効率的に参照できる。
- システムは 削除はアーカイブ方式とし、参照整合性を維持する。

---

## 機能

## 3階層工種体系管理
### ステータス
- [x] 検討中（PdMが要件を整理している段階）
- [x] 概念設計中（PdMが概念設計を行っている段階）
- [x] 概念設計確定（PdMが概念設計を固め、エンジニアに渡せる状態）
- [ ] 実装中（Engが開発中）
- [ ] 実装完了（機能がリリース済み）
- [ ] 不採用（検討の結果ボツになったもの）

### 機能概要
大分類（工事区分・建物用途）→ 工種（具体的な工事内容）→ 細別（詳細な作業項目）の3階層構造で工種体系を管理する機能。
各階層で名称、説明等の基本情報を管理し、工種・細別レベルでは基準作業日数データを連携する。

### ビジネス目標
工事データを構造化し、標準化された分類体系を確立する。
ツリー構造によって直感的に理解・利用でき、知識の共有を促進する。
工程表や日報での工種・細別選択を効率化し、計画精度の向上につなげる。

### 機能要件
#### 大分類を追加・編集・削除（アーカイブ）できる。

#### 工種を追加・編集・削除（アーカイブ）できる。

#### 細別を追加・編集・削除（アーカイブ）できる。

#### 工種体系をツリーUI上で閲覧・操作できる。


---

## 工種体系マスタ切り替え管理
### ステータス
- [x] 検討中（PdMが要件を整理している段階）
- [x] 概念設計中（PdMが概念設計を行っている段階）
- [x] 概念設計確定（PdMが概念設計を固め、エンジニアに渡せる状態）
- [ ] 実装中（Engが開発中）
- [ ] 実装完了（機能がリリース済み）

### 機能概要
複数の工種体系マスタを同時に管理できる。
建築用／土木用／設備用といった用途別マスタを用意し、現場や支店ごとに適用するマスタを切り替え可能にする。
ユーザーが新しいマスタを自由に作成・複製・アーカイブできる。

### ビジネス目標
組織内でマスタ統一が難しい場合でも、現場や拠点ごとの多様性に対応できるようにする。
適切なマスタを現場に割り当てることで、現場特性に合った工程管理を実現する。
データを利用するときに「どのマスタのデータか」を明確にし、誤用を防ぐ。
将来的には、マスタ横断での集計・分析ダッシュボードを提供できる基盤とする。

### 機能要件
#### 用途に応じて工種体系マスタを切り替えできる。

#### 新しい工種体系マスタを作成できる。

#### 既存の工種体系マスタを複製して新しいマスタを作成できる。

#### 不要になった工種体系マスタを削除（アーカイブ）できる。

#### 現在どのマスタを使用しているかを明確に確認できる。


---


## 細別所要日数機能
### ステータス
- [x] 検討中（PdMが要件を整理している段階）
- [x] 概念設計中（PdMが概念設計を行っている段階）
- [x] 概念設計確定（PdMが概念設計を固め、エンジニアに渡せる状態）
- [ ] 実装中（Engが開発中）
- [ ] 実装完了（機能がリリース済み）

### 機能概要
細別ごとの基準作業日数を管理し、工程計画の自動算出に活用する。
作業単位（数値＋単位）を設定し、その作業単位をこなすのに必要なおおよその日数を入力する。
歩掛に比べて粒度が粗く、入力や管理が容易。

### ビジネス目標
現場が「歩掛までは入力・管理できない」場合でも、大体の日数を記録するだけで工程表生成を精度向上させる。
荒い粒度でのデータ管理により、導入ハードルを下げつつ精度と利便性を両立する。
将来的に、歩掛と併用・比較することで、工事計画の柔軟性と精度向上につなげる。

### 機能要件
#### 細別ごとに作業単位（数値＋単位）を設定できる。

#### 細別ごとに日数を設定できる。

#### 細別ごとに登録した日数を表示・編集・削除できる。


---

## 細別歩掛管理

### ステータス
- [x] 検討中（PdMが要件を整理している段階）
- [x] 概念設計中（PdMが概念設計を行っている段階）
- [x] 概念設計確定（PdMが概念設計を固め、エンジニアに渡せる状態）
- [ ] 実装中（Engが開発中）
- [ ] 実装完了（機能がリリース済み）

### 機能概要
細別レベルでの歩掛データ（労務・機械・資材ごとの生産性単位）を管理する機能。
登録された歩掛は、工程表生成・工程エディター・リソース参照に利用される。
将来的には複数歩掛を集計して、より高精度な工数・コスト算出に活用可能。

### ビジネス目標
工数算出精度の向上：実情に即した歩掛データにより、詳細な工程計画を実現する。
リソース計画・積算との連動：必要人数・機械台数・資材数量を歩掛から逆算可能にする。
実績データ蓄積：過去の歩掛実績を蓄積し、将来的に生産性向上や精度改善へ活かす。

### 機能要件
#### 歩掛の作業単位（数値＋単位）を設定できる。

※作業日数とは別管理とする。

#### 細別に歩掛を追加できる。
※これまでは基準と条件別で管理していたが、基準がある必要がない(条件が何もないものを基準とする)ので統一する。
歩掛名を設定できる。

~~条件を設定できる（条件なしの場合は細別内で1件のみ登録可）。条件を追加することで、同一細別に複数の歩掛を登録できる。~~

#### 歩掛値（労務／機械／資材）を複数追加できる。

労務：名称、数値、人日／人時
機械：名称、数値、台日／台時
資材：名称、数値、単位（m²、m³、kg、t、本、個、台、式、組など）

#### 登録済みの歩掛を表示・編集・削除できる。

---

※将来的な機能
## 条件項目管理

### ステータス
- [x] 検討中（PdMが要件を整理している段階）
- [x] 概念設計中（PdMが概念設計を行っている段階）
- [ ] 概念設計確定（PdMが概念設計を固め、エンジニアに渡せる状態）
- [ ] 実装中（Engが開発中）
- [ ] 実装完了（機能がリリース済み）
- [x] 不採用(将来的に実装する)

### 機能概要
工種・細別に対して、条件分岐付きの日数や歩掛を設定するための条件項目を管理する機能。
条件項目はプリセットから選択して使えるほか、必要に応じてユーザー自身で追加・編集できる。
条件タイプとしては、選択式・複数選択・数値・真偽値・文字列・範囲などをサポートする。

### ビジネス目標
条件分岐の明確化により、実際の施工条件を反映した柔軟な所要日数／歩掛算出を可能にする。
条件設定を体系化し、同一組織内でのルール共有・再利用性を高める。
プリセット化により、異なる条件設定の属人化を防止する。

### 機能要件
#### 条件項目を追加できる。

#### プリセットから条件項目を選択して利用できる。

#### 条件項目を表示・編集・削除できる。

#### 条件項目のタイプ（選択式／複数選択／数値／真偽値／文字列／範囲）を指定できる。

#### 条件項目を細別の日数・歩掛の算出条件として設定できる。

#### 条件項目のプリセットをカスタマイズ（追加／編集／削除）できる。


---

※将来的な機能
## 工種所要日数機能
### ステータス
- [x] 検討中（PdMが要件を整理している段階）
- [ ] 概念設計中（PdMが概念設計を行っている段階）
- [ ] 概念設計確定（PdMが概念設計を固め、エンジニアに渡せる状態）
- [ ] 実装中（Engが開発中）
- [ ] 実装完了（機能がリリース済み）
- [x] 不採用(将来的に実装する)

### 機能概要
工種ごとに基準作業日数を登録・管理する。
作業単位は1式で固定し、日数データのみを扱う（最小入力で工程表生成に活用）。

### ビジネス目標
「細別や歩掛の整備までは大変」な会社でも、工種レベルの簡易入力だけで生成精度を底上げする。
将来的な細別→工種のボトムアップ推定に備えつつ、現時点では単独の基準日数として運用する。


### 機能要件
#### 工種ごとに基準作業日数を設定できる。

#### 設定した日数を表示・編集・削除できる。


---