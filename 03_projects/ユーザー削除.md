---
type: note
moc: "[[🏷️基本設計書]]"
tags:
- '#ai/ref'
---
> [!info] 必要なセクションを選択して使用してください！

# 🎯 目的・対象範囲

- **目的**
    - 何をどう実装／改善するか
- **対象範囲**  
    - 対象となるシステム／モジュール／期間

# 🏗 システム構成概要

- **高レベル図**（ブロック図 / コンテキスト図 / アーキテクチャ図）
- **主要コンポーネント一覧**

# 🛠 基本設計

## 現状整理
Usersテーブルを参照しているテーブルは下記の

1. InternalMemberInvitations（Restrict）
2. ExternalMemberInvitations（Restrict）
3. SiteMembers（Cascade）
4. Sites（Restrict）
5. WorkOrders（Restrict）
6. AffiliatedUsers（Cascade）
7. FileExportJobs（Cascade）
8. HYHs（Cascade）
9. CompanyMailingListMembers（Cascade）

## InternalMemberInvitations（Restrict）
- restrictである必要はないので、cascadeにする
- もしInvitationを送付している最中である場合、そのInvitationは無効になってしまうがInvitationを再送すれば済む問題なのでこのデメリットは受け入れる
## ExternalMemberInvitations（Restrict）
- restrictである必要はないので、cascadeにする
- もしInvitationを送付している最中である場合、そのInvitationは無効になってしまうがInvitationを再送すれば済む問題なのでこのデメリットは受け入れる
## SiteMembers（Cascade）
- 変更不要
## Sites（Restrict）
- createdByをnullableにしてonDelete = SetNullとする
## WorkOrders（Restrict）
- createdByをnullableにしてonDelete = SetNullとする
## AffiliatedUsers（Cascade）
## FileExportJobs（Cascade）
## HYHs（Cascade）
- CascadeからRestrictに変更する
- userIdをnullableにしてonDelete = SetNullとする
## CompanyMailingListMembers（Cascade）
